<html>
    <head>
        <title>Moscrop Secondary | Sign Up</title>

        <!-- Import materialize.css -->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <!-- Import custom stylesheets -->
        <link type="text/css" rel="stylesheet" href="css/custom.min.css"/>
        <link type="text/css" rel="stylesheet" href="css/animate.min.css"/>

        <!-- Let browser know website is optimized for mobile -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <!-- Import Parse -->
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
        
    </head>

    <body onkeydown="return done()">
        <!-- Containing "card" -->
        <div class="container centered" id="container" onkeydown="return done()">

        <div class="row">
              <div class="col s12 m6 centered">
                <div class="card animated fadeInDownC">
                  <div class="card-image">
                    <img src="img/hero3_small.png" class="desaturate">
                    <span class="card-title">Sign Up</span>
                  </div>

                  <div class="card-content">
                    <div class="row">
                        <form class="col s12">

                            <!-- Email field -->
                            <div class="row">
                                <div class="input-field col s12">
                                  <input id="email_field" type="email" class="validate">
                                  <label for="email_field">Email</label>
                                </div>
                            </div>

                            <!-- Username field -->
                            <div class="row">    
                                <div class="input-field col s12">
                                  <input id="username_field" type="text" class="validate">
                                  <label for="username_field">Username</label>
                                </div>
                            </div>

                            <!-- Login button -->
                            <div class="row">
                                <div class="input-field col s12">
                                  <input id="password_field" type="password" class="validate">
                                  <label for="password_field">Password</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Register button -->
                <div id="register" class="card-action" style="float:right; margin-top:-23%">
                    <!-- <a class="btn-floating btn-large waves-effect waves-light red" onclick="done()">
                        <i class="material-icons">done</i>
                    </a> -->
                    <p class="btn-large waves-effect waves-light red" onclick="done()">Register</p>
                </div>

                </div>
              </div>
            </div>
            
        </div>

        <script>
            Parse.initialize("TtFxol5uKm6piqaomYYvaTtezhRJQFZFRadc9qit", "smiduKJqXsJXvEnYj5nUSBFxxTXMpHiZZibVVyLx");

            function done() {
                var user = new Parse.User();

                var username = document.getElementById("username_field").value;
                var email = document.getElementById("email_field").value;
                var password = document.getElementById("password_field").value;

                user.set("username", username);
                user.set("email", email);
                user.set("password", password);

                user.signUp(null, {
                    success: function(user) {
                        // Hooray! Let them use the app now.
                        window.location.href = "index.html"
                    },
                    error: function(user, error) {
                        // Show the error message somewhere and let the user try again.
                        alert("Error: " + error.code + " " + error.message);
                    }
                });
            }
        </script>

        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.js"></script>
    </body>
</html>